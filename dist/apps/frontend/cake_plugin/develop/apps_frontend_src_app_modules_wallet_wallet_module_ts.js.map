{"version":3,"file":"apps_frontend_src_app_modules_wallet_wallet_module_ts.js","mappings":"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","sources":["./apps/frontend/src/app/modules/wallet/wallet-routing.module.ts","./apps/frontend/src/app/modules/wallet/wallet.component.ts","./apps/frontend/src/app/modules/wallet/wallet.component.html","./apps/frontend/src/app/modules/wallet/wallet.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { WalletComponent } from './wallet.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WalletComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class WalletRoutingModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core'\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { GetWalletResponseBody, UserProfile } from '@cake/lib-api-interface';\nimport { BehaviorSubject, takeUntil, tap } from 'rxjs';\nimport { ApiService } from '../../services/api.service';\nimport { AuthService } from '../../services/auth.service';\nimport { ModalsService } from '../../services/modals.service';\nimport { Watcher } from '../../shared/classes/watcher';\n\n@Component({\n  selector: 'cake-wallet',\n  templateUrl: './wallet.component.html',\n  styleUrls: ['./wallet.component.scss'],\n})\nexport class WalletComponent extends Watcher implements OnInit, OnDestroy {\n\n  editForm!: FormGroup;\n\n  wallets!: GetWalletResponseBody['data']['wallets'];\n\n  copied!: string;\n\n  public get authUser() : BehaviorSubject<UserProfile | null> {\n    return this.authService.userProfile;\n  }\n  \n  constructor(private apiService: ApiService, private authService: AuthService, private modalService: ModalsService, private fb: FormBuilder) {\n    super();\n  };\n\n  ngOnInit(): void {\n    this.getWallets()\n  }\n\n  getWallets(): void {\n    this.apiService.getWallets().pipe(takeUntil(this.unsubscribe)).subscribe(res => {\n      this.wallets = res.data.wallets;\n      this.editForm = this.fb.group(Object.fromEntries(new Map(this.wallets.map(el => [el.address, ['']]))))\n    })\n  }\n\n  copyAddress(address: string): void {\n    this.copied = address;\n    setTimeout(() => {\n      this.copied = '';\n    }, 1000);\n  }\n\n  removeWallet(address: string, id: string) {\n    this.modalService.openDeleteWallet(address, id);\n    this.modalService.handleDeleteWallet.pipe(takeUntil(this.unsubscribe), tap(()=> {\n      this.getWallets();\n    })).subscribe();\n  }\n\n  editWallet(address: string, name: string): void {\n    this.editForm.get(address)?.patchValue(name);\n  }\n\n  saveEditionWallet(wallet: GetWalletResponseBody['data']['wallets'][0]): void {\n    this.apiService.editWallet({...wallet, name: this.editForm.get(wallet.address)?.value || wallet.name, }).pipe(takeUntil(this.unsubscribe)).subscribe(() => {\n      this.getWallets();\n    })\n  }\n\n  openAddingWallet() {\n    this.modalService.openAddingWalletPopup();\n    this.modalService.handleAddWallet.pipe(takeUntil(this.unsubscribe), tap(()=> {\n      this.getWallets();\n    })).subscribe();\n  }\n\n  override ngOnDestroy(): void {\n      super.ngOnDestroy();\n  }\n}\n","<div class=\"container max-content\">\n    <h1>\n        Wallet\n    </h1>\n\n    <form class=\"wallets\" [formGroup]=\"editForm\" *ngIf=\"editForm\">\n        <div class=\"wallet\" *ngFor=\"let wallet of wallets\" [class.edit-wallet-block]=\"editForm.value[wallet.address]\">\n            <div class=\"info\" >\n                <h2 *ngIf=\"!editForm.value[wallet.address]\">{{wallet.name}}</h2>\n                <div class=\"edit-input\" *ngIf=\"editForm.value[wallet.address]\">\n                    <cake-input [control]=\"editForm.controls[wallet.address]\" ></cake-input>\n                </div>\n                <span>{{wallet.address}}</span>\n                <span>{{wallet.address.slice(0,8)}}...{{wallet.address.slice(wallet.address.length - 8,wallet.address.length)}}</span>\n            </div>\n            <div class=\"settings\">\n                <ng-container *ngIf=\"!editForm.value[wallet.address]\">\n                    <mat-icon class=\"tertiary\" [svgIcon]=\"'copy'\" [cdkCopyToClipboard]=\"wallet.address\" (click)=\"copyAddress(wallet.address)\"></mat-icon>\n                    <mat-icon class=\"tertiary\" [svgIcon]=\"'remove'\" (click)=\"removeWallet(wallet.address, wallet.id)\"></mat-icon>\n                    <mat-icon class=\"tertiary\" [svgIcon]=\"'edit-light'\" (click)=\"editWallet(wallet.address, wallet.name)\"></mat-icon>\n                    <span class=\"copy-text\" *ngIf=\"copied === wallet.address\">Copied  to clipboard</span>\n                </ng-container>\n                <div class=\"save-btn\" *ngIf=\"editForm.value[wallet.address]\">\n                    <button class=\"button primary\" (click)=\"saveEditionWallet(wallet)\">Save</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"wallet-info\" *ngIf=\"wallets.length\">\n            <div class=\"item\">\n                <div class=\"amount\">\n                    {{9322 | currency: 'USD':'symbol-narrow':'1.0-0'}}\n                </div>\n                <div class=\"currency\">\n                    USDT\n                </div>\n            </div>\n            <div class=\"item\">\n                <div class=\"amount\">\n                    {{(authUser | async)?.sugar | number}}\n                </div>\n                <div class=\"currency\">\n                    Sugar\n                </div>\n            </div>\n            <div class=\"item\">\n                <div class=\"amount\">\n                    {{12312 | number}}\n                </div>\n                <div class=\"currency\">\n                    DAI\n                </div>\n            </div>\n            <div class=\"item\">\n                <div class=\"amount\">\n                    {{2324 | number}}\n                </div>\n                <div class=\"currency\">\n                    ETH\n                </div>\n            </div>\n        </div>\n    </form>\n    <div class=\"add-new-btn\">\n\t\t<button class=\"button tertiary\" (click)=\"openAddingWallet()\"><span class=\"plus\">+</span> <span> Add new </span></button>\n    </div>\n</div>","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\n\nimport { WalletRoutingModule } from './wallet-routing.module'\nimport { WalletComponent } from './wallet.component'\nimport { SharedModule } from '../../shared/shared.module'\n\n@NgModule({\n  declarations: [WalletComponent],\n  imports: [CommonModule, WalletRoutingModule, SharedModule],\n})\nexport class WalletModule {}\n"],"names":["FormBuilder","takeUntil","tap","ApiService","AuthService","ModalsService","Watcher","i0","WalletComponent","constructor","apiService","authService","modalService","fb","authUser","userProfile","ngOnInit","getWallets","pipe","unsubscribe","subscribe","res","wallets","data","editForm","group","Object","fromEntries","Map","map","el","address","copyAddress","copied","setTimeout","removeWallet","id","openDeleteWallet","handleDeleteWallet","editWallet","name","get","patchValue","saveEditionWallet","wallet","value","openAddingWallet","openAddingWalletPopup","handleAddWallet","ngOnDestroy","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}