"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[672],{672:(U,u,i)=>{i.r(u),i.d(u,{AuthModule:()=>A});var g=i(6895),l=i(8996),r=i(4006),p=i(554),m=i(9070),f=i(9362),d=i(2722),t=i(4650),h=i(9852);function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"form",11),t.NdJ("ngSubmit",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.submit())}),t.TgZ(1,"div",12),t._UZ(2,"cake-input",13),t.qZA(),t.TgZ(3,"div",12),t._UZ(4,"cake-input",14),t.qZA(),t.TgZ(5,"div",7)(6,"button",15),t._uU(7,"Log in"),t.qZA()()()}if(2&n){const e=t.oxw();let o;t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("placeholder","Enter email")("control",e.form.controls.email)("error",e.getEmailError()),t.xp6(2),t.Q6J("placeholder","Enter password")("hasEye",!0)("defaultType","password")("control",e.form.controls.password)("error",e.isError("password")&&null!=(o=e.form.get("password"))&&o.hasError("required")?"This field is required":""),t.xp6(2),t.Q6J("disabled",e.form.invalid||e.waitingResponse)}}let C=(()=>{class n extends f.C{constructor(e,o,c,a){super(),this.fb=e,this.apiService=o,this.authService=c,this.router=a,this.waitingResponse=!1}ngOnInit(){this.createForm()}createForm(){this.form=this.fb.group({password:["",[r.kI.required,r.kI.minLength(6)]],email:["",[r.kI.required,r.kI.email]]})}submit(){const e={...this.form.value};this.waitingResponse=!0,this.apiService.signIn(e).pipe((0,d.R)(this.unsubscribe)).subscribe(o=>{this.waitingResponse=!1,this.authService.signIn(o),this.router.navigate(["/home"])},()=>{this.waitingResponse=!1})}getEmailError(){return this.isError("email")?this.form.get("email")?.hasError("required")?"Email is required":"Email is invalid":""}isError(e){return this.form.get(e)?.invalid&&this.form.get(e)?.errors&&(this.form.get(e)?.dirty||this.form.get(e)?.touched)}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(p.s),t.Y36(m.e),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cake-sign-in"]],features:[t.qOj],decls:21,vars:1,consts:[[1,"flex-block"],[1,"logo"],["src","../../../../../assets/imgs/logo.png","alt","logo"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"questions-block"],[1,"forgot-pass-block"],[1,"text"],[1,"login-btn"],[1,"button","tertiary"],[1,"need-account-block"],["routerLink","/auth/sign-up",1,"button","tertiary"],[3,"formGroup","ngSubmit"],[1,"input-block"],[3,"placeholder","control","error"],[3,"placeholder","hasEye","defaultType","control","error"],[1,"button","primary",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.YNc(3,b,8,10,"form",3),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"p"),t._uU(8,"Forgot password?"),t.qZA()(),t.TgZ(9,"div",7)(10,"button",8),t._uU(11,"Get new one"),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",6)(14,"p"),t._uU(15,"Need an account?"),t.qZA()(),t.TgZ(16,"div",7)(17,"button",10),t._uU(18,"Sign up here"),t.qZA()()()(),t.TgZ(19,"footer"),t._uU(20,"\xa9 2022 Cak3"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.form))},dependencies:[g.O5,l.rH,r._Y,r.JL,r.sg,h.a],styles:[".input-control[_ngcontent-%COMP%]{margin-bottom:24px}.flex-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;max-width:424px;height:calc(100vh - 140px);margin:auto;padding:100px 20px 40px}@media (min-height: 1000px){.flex-block[_ngcontent-%COMP%]{justify-content:center}}.flex-block[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:50px}.flex-block[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]{margin-bottom:20px}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:201px;margin:auto auto 50px}.flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]{width:100%}.flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]   .forgot-pass-block[_ngcontent-%COMP%], .flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]   .need-account-block[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]   .forgot-pass-block[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]   .need-account-block[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Gilroy-300;font-size:16px;color:var(--color-fonts-2)}.flex-block[_ngcontent-%COMP%]   .questions-block[_ngcontent-%COMP%]   .need-account-block[_ngcontent-%COMP%]{margin-bottom:80px;border-top:1px solid var(--color-tertiary-5)}.flex-block[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{font-family:Gilroy-300;font-size:16px;color:var(--color-fonts-2)}"]}),n})();var k=i(4884),P=i(7564),_=i(9386),v=i(905),O=i(7507);function M(n,s){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"cake-download-plugin"),t.qZA())}let y=(()=>{class n{constructor(){this.router="/"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["cake-congratulations-screen"]],inputs:{title:"title",titleImg:"titleImg",mark:"mark",text:"text",isNeedPlugin:"isNeedPlugin",router:"router",btnText:"btnText"},decls:15,vars:7,consts:[[1,"flex-block"],[1,"title"],[3,"src"],[1,"check-mark-block"],["alt","",3,"src"],[1,"text-block"],["class","plugin-block",4,"ngIf"],[1,"have-account-block"],[1,"button","primary",3,"routerLink"],[1,"plugin-block"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3),t.qZA(),t._UZ(4,"img",2),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"img",4),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.YNc(9,M,2,0,"div",6),t.TgZ(10,"div",7)(11,"button",8),t._uU(12),t.qZA()(),t.TgZ(13,"footer"),t._uU(14,"\xa9 2022 Cak3"),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(o.title),t.xp6(1),t.s9C("src",o.titleImg,t.LSH),t.xp6(2),t.s9C("src",o.mark,t.LSH),t.xp6(2),t.hij(" ",o.text," "),t.xp6(1),t.Q6J("ngIf",o.isNeedPlugin),t.xp6(2),t.Q6J("routerLink",o.router),t.xp6(1),t.Oqu(o.btnText))},dependencies:[g.O5,l.rH,O.i],styles:[".flex-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100vh;margin:auto}.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:785px;background-image:url(confetti.cb51ea0be0f12a41.png);background-position:center;background-repeat:no-repeat;background-size:contain}@media (max-width: 990px){.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%}}.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:50px 0;font-family:Santhony;font-weight:100;font-size:56px;background-color:var(--color-gradient-left-3);background-image:linear-gradient(var(--deg-gradient-3),var(--color-gradient-left-3),var(--color-gradient-right-3));background-size:100%;-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:transparent;-moz-text-fill-color:transparent}@media (max-width: 425px){.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 375px){.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px}}.flex-block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:50px 0;width:59px}.flex-block[_ngcontent-%COMP%]   .check-mark-block[_ngcontent-%COMP%]{width:132px}.flex-block[_ngcontent-%COMP%]   .check-mark-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.flex-block[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{width:424px;font-family:Gilroy-400;font-size:30px;color:var(--color-fonts-2);text-align:center}@media (max-width: 425px){.flex-block[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{font-size:20px;width:90%}}.flex-block[_ngcontent-%COMP%]   .plugin-block[_ngcontent-%COMP%]{width:80%}.flex-block[_ngcontent-%COMP%]   .have-account-block[_ngcontent-%COMP%]{width:202px}.flex-block[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{font-family:Gilroy-300;font-size:16px;color:var(--color-fonts-2)}"]}),n})();function Z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"form",11),t.NdJ("ngSubmit",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.submit())}),t.TgZ(1,"div",12),t._UZ(2,"cake-input",13),t.qZA(),t.TgZ(3,"div",12),t._UZ(4,"cake-input",13),t.qZA(),t.TgZ(5,"div",12),t._UZ(6,"cake-input",13),t.qZA(),t.TgZ(7,"div",12),t._UZ(8,"cake-input",14),t.qZA(),t.TgZ(9,"div",12),t._UZ(10,"cake-input",14),t.qZA(),t.TgZ(11,"div",12),t._UZ(12,"cake-input",13),t.qZA(),t.TgZ(13,"div",12),t._UZ(14,"cake-input",13),t.qZA(),t.TgZ(15,"div",15)(16,"button",16),t._uU(17,"Sign up"),t.qZA()()()}if(2&n){const e=t.oxw(2);let o,c,a,x;t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("placeholder","Enter your first name")("control",e.form.controls.firstName)("error",e.isError("firstName")&&null!=(o=e.form.get("firstName"))&&o.hasError("required")?"This field is required":""),t.xp6(2),t.Q6J("placeholder","Enter your last name")("control",e.form.controls.lastName)("error",e.isError("lastName")&&null!=(c=e.form.get("lastName"))&&c.hasError("required")?"This field is required":""),t.xp6(2),t.Q6J("placeholder","Create username")("control",e.form.controls.username)("error",e.isError("username")&&null!=(a=e.form.get("username"))&&a.hasError("required")?"This field is required":""),t.xp6(2),t.Q6J("placeholder","Password")("hasEye",!0)("defaultType","password")("control",e.form.controls.password)("error",e.getPasswordError()),t.xp6(2),t.Q6J("placeholder","Verify password")("hasEye",!0)("defaultType","password")("control",e.form.controls.verifyPassword)("error",e.getVerifyPassError()),t.xp6(2),t.Q6J("placeholder","Enter email")("control",e.form.controls.email)("error",e.getEmailError()),t.xp6(2),t.Q6J("placeholder","Create recovery phrase")("control",e.form.controls.recoveryPhase)("error",e.isError("recoveryPhase")&&null!=(x=e.form.get("recoveryPhase"))&&x.hasError("required")?"This field is required":""),t.xp6(2),t.Q6J("disabled",e.form.invalid)}}function w(n,s){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"img",4),t.qZA(),t.YNc(3,Z,18,27,"form",5),t.TgZ(4,"div",6)(5,"button",7),t._uU(6,"Cancel"),t.qZA()(),t.TgZ(7,"div",8)(8,"div",9)(9,"p"),t._uU(10,"Already have an account?"),t.qZA()(),t.TgZ(11,"div",10)(12,"button",7),t._uU(13," Sign in "),t.qZA()()(),t.TgZ(14,"footer"),t._uU(15,"\xa9 2022 Cak3"),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.form)}}function T(n,s){if(1&n&&t._UZ(0,"cake-congratulations-screen",17),2&n){const e=t.oxw();t.Q6J("isNeedPlugin",!e.environment.plugin)("router",e.environment.plugin?"/home":"/grab-a-slice")}}const q=[{path:"sign-up",component:(()=>{class n extends f.C{constructor(e,o,c,a){super(),this.fb=e,this.apiService=o,this.authService=c,this.customToasterService=a,this.isRegisterDone=!1,this.environment=_.N}ngOnInit(){this.createForm()}createForm(){this.form=this.fb.group({firstName:["",[r.kI.required]],lastName:["",[r.kI.required]],username:["",[r.kI.required]],password:["",[r.kI.required,r.kI.minLength(6)]],verifyPassword:["",[r.kI.required,r.kI.minLength(6)]],email:["",[r.kI.required,r.kI.email]],recoveryPhase:["",[r.kI.required]]})}submit(){const e={...this.form.value,role:k.u.kol};delete e.verifyPassword,this.apiService.signUp(e).pipe((0,d.R)(this.unsubscribe)).subscribe(o=>{this.authService.signIn(o),this.isRegisterDone=!0},o=>{400===o.status&&"P2002"===o.error.code&&this.customToasterService.showErrorToaster(P.O.topCenter,`User ${this.form.value.username} already exist`)})}getEmailError(){return this.isError("email")?this.form.get("email")?.hasError("required")?"Email is required":"Email is invalid":""}getPasswordError(){return this.isError("password")?this.form.get("password")?.hasError("required")?"Password is required":"Password must be at least 6 characters long":""}getVerifyPassError(){return this.form.get("verifyPassword")?.touched&&this.form.get("verifyPassword")?.value!==this.form.get("password")?.value?"Passwords don't match":""}isError(e){return this.form.get(e)?.invalid&&this.form.get(e)?.errors&&(this.form.get(e)?.dirty||this.form.get(e)?.touched)}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(p.s),t.Y36(m.e),t.Y36(v.b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cake-sign-up"]],features:[t.qOj],decls:2,vars:2,consts:[["class","flex-block",4,"ngIf"],["title","Congratulations!","titleImg","../../../assets/imgs/Party-popper.png","mark","../../../assets/imgs/check-mark-button.png","text","You have successfully registered","btnText","Grab a slice!",3,"isNeedPlugin","router",4,"ngIf"],[1,"flex-block"],[1,"logo"],["src","../../../../../assets/imgs/logo.png","alt","logo"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"cancel-block"],["routerLink","/auth/sign-in",1,"button","tertiary"],[1,"have-account-block"],[1,"text"],[1,"login-btn"],[3,"formGroup","ngSubmit"],[1,"input-block"],[3,"placeholder","control","error"],[3,"placeholder","hasEye","defaultType","control","error"],[1,"sign-up-btn"],[1,"button","primary",3,"disabled"],["title","Congratulations!","titleImg","../../../assets/imgs/Party-popper.png","mark","../../../assets/imgs/check-mark-button.png","text","You have successfully registered","btnText","Grab a slice!",3,"isNeedPlugin","router"]],template:function(e,o){1&e&&(t.YNc(0,w,16,1,"div",0),t.YNc(1,T,1,2,"cake-congratulations-screen",1)),2&e&&(t.Q6J("ngIf",!o.isRegisterDone),t.xp6(1),t.Q6J("ngIf",o.isRegisterDone))},dependencies:[g.O5,l.rH,r._Y,r.JL,r.sg,h.a,y],styles:[".input-control[_ngcontent-%COMP%]{margin-bottom:24px}.flex-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;max-width:424px;height:calc(100% - 140px);margin:auto;padding:100px 20px 40px}@media (min-height: 1000px){.flex-block[_ngcontent-%COMP%]{justify-content:center}}.flex-block[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-bottom:50px}.flex-block[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]{margin-bottom:20px}.flex-block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .sign-up-btn[_ngcontent-%COMP%]{width:202px;margin:auto}.flex-block[_ngcontent-%COMP%]   .cancel-block[_ngcontent-%COMP%]{margin:24px auto 50px}.flex-block[_ngcontent-%COMP%]   .have-account-block[_ngcontent-%COMP%]{width:100%;border-top:1px solid var(--color-tertiary-5);display:flex;justify-content:center;align-items:center;margin-bottom:80px}.flex-block[_ngcontent-%COMP%]   .have-account-block[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Gilroy-300;font-size:16px;color:var(--color-fonts-2)}.flex-block[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{font-family:Gilroy-300;font-size:16px;color:var(--color-fonts-2)}"]}),n})()},{path:"sign-in",component:C}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(q),l.Bz]}),n})();var S=i(1744);let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,E,S.m]}),n})()}}]);