const a7_0xfc08=['hash','project','false','/nx-cloud/executions/status','true','then','parseCommand','maxParallel','../../../utilities/environment','runGroup:\x20','../../../utilities/serializer-overrides','recordMetric','completeRunGroup','createStartRequest','agentCount','Starting\x20a\x20distributed\x20execution','next','note','Completing\x20run\x20group\x20with\x20an\x20error','completeRunGroupWithError','data','mapRespToPerfEntry','createMetricRecorder','done','dteStatus','RUNNER_FAILURE_PERF_ENTRY','stopAgentsOnFailure','post','axiosException','configuration','defineProperty','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','__awaiter','value','response','exit','error:\x20','apiAxiosInstance','axiosMultipleTries','/nx-cloud/executions/start','getBranch','message','VERBOSE_LOGGING','apply','error','serializeOverrides','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','enabled','DistributedExecutionApi','createApiAxiosInstance','start','parallel','target','map','../../../utilities/nx-imports'];(function(_0x12e180,_0xfc0808){const _0x9a07f0=function(_0x2a9231){while(--_0x2a9231){_0x12e180['push'](_0x12e180['shift']());}};_0x9a07f0(++_0xfc0808);}(a7_0xfc08,0xb3));const a7_0x9a07=function(_0x12e180,_0xfc0808){_0x12e180=_0x12e180-0x0;let _0x9a07f0=a7_0xfc08[_0x12e180];return _0x9a07f0;};'use strict';var __awaiter=this&&this[a7_0x9a07('0x12')]||function(_0x477154,_0x49b534,_0x115eba,_0x35d958){function _0x582b4a(_0xe08f2f){return _0xe08f2f instanceof _0x115eba?_0xe08f2f:new _0x115eba(function(_0x3205df){_0x3205df(_0xe08f2f);});}return new(_0x115eba||(_0x115eba=Promise))(function(_0x5367e6,_0x28dfc3){function _0x20466e(_0x1598ab){try{_0x5d97db(_0x35d958[a7_0x9a07('0x2')](_0x1598ab));}catch(_0x293220){_0x28dfc3(_0x293220);}}function _0x36a58e(_0x41d325){try{_0x5d97db(_0x35d958['throw'](_0x41d325));}catch(_0x435a88){_0x28dfc3(_0x435a88);}}function _0x5d97db(_0x37b0f9){_0x37b0f9[a7_0x9a07('0x9')]?_0x5367e6(_0x37b0f9[a7_0x9a07('0x13')]):_0x582b4a(_0x37b0f9[a7_0x9a07('0x13')])[a7_0x9a07('0x2e')](_0x20466e,_0x36a58e);}_0x5d97db((_0x35d958=_0x35d958[a7_0x9a07('0x1d')](_0x477154,_0x49b534||[]))[a7_0x9a07('0x2')]());});};Object[a7_0x9a07('0x10')](exports,'__esModule',{'value':!![]});exports['createStartRequest']=exports[a7_0x9a07('0x22')]=void 0x0;const axios_1=require('../../../utilities/axios');const environment_1=require(a7_0x9a07('0x31'));const metric_logger_1=require('../../../utilities/metric-logger');const serializer_overrides_1=require(a7_0x9a07('0x33'));const {output}=require(a7_0x9a07('0x28'));class DistributedExecutionApi{constructor(_0x3494d0){this['apiAxiosInstance']=(0x0,axios_1[a7_0x9a07('0x23')])(_0x3494d0);}[a7_0x9a07('0x24')](_0x1628fb){var _0x2f7623;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x39b4c9=(0x0,metric_logger_1[a7_0x9a07('0x8')])('dteStart');let _0x351090;if(environment_1[a7_0x9a07('0x1c')]){output[a7_0x9a07('0x3')]({'title':a7_0x9a07('0x1'),'bodyLines':[JSON['stringify'](_0x1628fb,null,0x2)]});}try{_0x351090=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a7_0x9a07('0x17')][a7_0x9a07('0xd')](a7_0x9a07('0x19'),_0x1628fb));_0x39b4c9[a7_0x9a07('0x34')]((0x0,metric_logger_1[a7_0x9a07('0x7')])(_0x351090));}catch(_0x19106a){_0x39b4c9[a7_0x9a07('0x34')](((_0x2f7623=_0x19106a===null||_0x19106a===void 0x0?void 0x0:_0x19106a[a7_0x9a07('0xe')])===null||_0x2f7623===void 0x0?void 0x0:_0x2f7623[a7_0x9a07('0x14')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x19106a['axiosException']['response']):metric_logger_1[a7_0x9a07('0xb')]);throw _0x19106a;}if(!_0x351090['data'][a7_0x9a07('0x21')]){throw new Error(a7_0x9a07('0x20'));}if(_0x351090[a7_0x9a07('0x6')]['error']){throw new Error(_0x351090[a7_0x9a07('0x6')][a7_0x9a07('0x1e')]);}return _0x351090[a7_0x9a07('0x6')]['id'];});}['status'](_0x5ed279){var _0x328e0a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4fe0ea=(0x0,metric_logger_1[a7_0x9a07('0x8')])(a7_0x9a07('0xa'));try{const _0x171bd0=yield(0x0,axios_1[a7_0x9a07('0x18')])(()=>this[a7_0x9a07('0x17')][a7_0x9a07('0xd')](a7_0x9a07('0x2c'),{'id':_0x5ed279}));_0x4fe0ea[a7_0x9a07('0x34')]((0x0,metric_logger_1[a7_0x9a07('0x7')])(_0x171bd0));return _0x171bd0[a7_0x9a07('0x6')];}catch(_0x5867f0){_0x4fe0ea[a7_0x9a07('0x34')](((_0x328e0a=_0x5867f0===null||_0x5867f0===void 0x0?void 0x0:_0x5867f0[a7_0x9a07('0xe')])===null||_0x328e0a===void 0x0?void 0x0:_0x328e0a[a7_0x9a07('0x14')])?(0x0,metric_logger_1[a7_0x9a07('0x7')])(_0x5867f0[a7_0x9a07('0xe')][a7_0x9a07('0x14')]):metric_logger_1[a7_0x9a07('0xb')]);output[a7_0x9a07('0x1e')]({'title':_0x5867f0[a7_0x9a07('0x1b')]});process[a7_0x9a07('0x15')](0x1);}});}[a7_0x9a07('0x5')](_0x4d3366,_0x1b61c9){var _0x3234bf;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x36a873=(0x0,metric_logger_1[a7_0x9a07('0x8')])(a7_0x9a07('0x35'));if(environment_1['VERBOSE_LOGGING']){output[a7_0x9a07('0x3')]({'title':a7_0x9a07('0x4'),'bodyLines':[a7_0x9a07('0x32')+_0x4d3366,a7_0x9a07('0x16')+_0x1b61c9]});}try{const _0x455ca1=yield(0x0,axios_1[a7_0x9a07('0x18')])(()=>this[a7_0x9a07('0x17')][a7_0x9a07('0xd')]('/nx-cloud/executions/complete-run-group',{'runGroup':_0x4d3366,'criticalErrorMessage':_0x1b61c9}),0x3);_0x36a873[a7_0x9a07('0x34')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x455ca1));}catch(_0x51110d){_0x36a873['recordMetric'](((_0x3234bf=_0x51110d===null||_0x51110d===void 0x0?void 0x0:_0x51110d[a7_0x9a07('0xe')])===null||_0x3234bf===void 0x0?void 0x0:_0x3234bf['response'])?(0x0,metric_logger_1[a7_0x9a07('0x7')])(_0x51110d['axiosException'][a7_0x9a07('0x14')]):metric_logger_1[a7_0x9a07('0xb')]);}});}}exports['DistributedExecutionApi']=DistributedExecutionApi;function createStartRequest(_0x5e1548,_0x22f5b4,_0x3e0717){const _0xb52c7=_0x22f5b4[a7_0x9a07('0x27')](_0x3cff70=>{return _0x3cff70[a7_0x9a07('0x27')](_0x1a9520=>{return{'taskId':_0x1a9520['id'],'hash':_0x1a9520[a7_0x9a07('0x29')],'projectName':_0x1a9520[a7_0x9a07('0x26')][a7_0x9a07('0x2a')],'target':_0x1a9520['target'][a7_0x9a07('0x26')],'configuration':_0x1a9520[a7_0x9a07('0x26')][a7_0x9a07('0xf')]||null,'params':(0x0,serializer_overrides_1[a7_0x9a07('0x1f')])(_0x1a9520)};});});const _0x820e91={'command':(0x0,environment_1[a7_0x9a07('0x2f')])(),'branch':(0x0,environment_1[a7_0x9a07('0x1a')])(),'runGroup':_0x5e1548,'tasks':_0xb52c7,'maxParallel':calculateMaxParallel(_0x3e0717)};if(environment_1[a7_0x9a07('0x11')]){_0x820e91[a7_0x9a07('0x0')]=environment_1[a7_0x9a07('0x11')];}if(!environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE']){_0x820e91[a7_0x9a07('0xc')]=![];}return _0x820e91;}exports[a7_0x9a07('0x36')]=createStartRequest;function calculateMaxParallel(_0x3f762f){if(_0x3f762f[a7_0x9a07('0x25')]===a7_0x9a07('0x2b')||_0x3f762f['parallel']===![]){return 0x1;}else if(_0x3f762f['parallel']===a7_0x9a07('0x2d')||_0x3f762f[a7_0x9a07('0x25')]===!![]){return Number(_0x3f762f[a7_0x9a07('0x30')]||0x3);}else if(_0x3f762f['parallel']===undefined){return _0x3f762f[a7_0x9a07('0x30')]?Number(_0x3f762f[a7_0x9a07('0x30')]):0x3;}else{return Number(_0x3f762f['parallel'])||0x3;}}