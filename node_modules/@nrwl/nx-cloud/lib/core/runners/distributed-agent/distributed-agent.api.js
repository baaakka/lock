const a5_0xc242=['throw','/nx-cloud/executions/tasks','createMetricRecorder','DistributedAgentApi','value','next','/nx-cloud/executions/complete-run-group','../../../utilities/metric-logger','recordMetric','completeRunGroup','apply','done','note','createApiAxiosInstance','axiosException','error:\x20','__awaiter','error','__esModule','../../../utilities/axios','tasks','axiosMultipleTries','post','../../../utilities/nx-imports','apiAxiosInstance','RUNNER_FAILURE_PERF_ENTRY','completeRunGroupWithError','agentName','mapRespToPerfEntry','defineProperty','runGroup','data','response','VERBOSE_LOGGING'];(function(_0x3816a7,_0xc242){const _0x9c18d9=function(_0x2d6916){while(--_0x2d6916){_0x3816a7['push'](_0x3816a7['shift']());}};_0x9c18d9(++_0xc242);}(a5_0xc242,0x14f));const a5_0x9c18=function(_0x3816a7,_0xc242){_0x3816a7=_0x3816a7-0x0;let _0x9c18d9=a5_0xc242[_0x3816a7];return _0x9c18d9;};'use strict';var __awaiter=this&&this[a5_0x9c18('0x15')]||function(_0x28e485,_0xdb94e0,_0x2674c4,_0x5879d6){function _0x2fcdb1(_0x56a31){return _0x56a31 instanceof _0x2674c4?_0x56a31:new _0x2674c4(function(_0x2e79e3){_0x2e79e3(_0x56a31);});}return new(_0x2674c4||(_0x2674c4=Promise))(function(_0x159ef1,_0x1f728d){function _0x37c80b(_0x181833){try{_0x44cabd(_0x5879d6[a5_0x9c18('0xa')](_0x181833));}catch(_0x11c35d){_0x1f728d(_0x11c35d);}}function _0x2f2e2c(_0x1c7682){try{_0x44cabd(_0x5879d6[a5_0x9c18('0x5')](_0x1c7682));}catch(_0x13044e){_0x1f728d(_0x13044e);}}function _0x44cabd(_0x10f5d1){_0x10f5d1[a5_0x9c18('0x10')]?_0x159ef1(_0x10f5d1[a5_0x9c18('0x9')]):_0x2fcdb1(_0x10f5d1[a5_0x9c18('0x9')])['then'](_0x37c80b,_0x2f2e2c);}_0x44cabd((_0x5879d6=_0x5879d6[a5_0x9c18('0xf')](_0x28e485,_0xdb94e0||[]))[a5_0x9c18('0xa')]());});};Object[a5_0x9c18('0x0')](exports,a5_0x9c18('0x17'),{'value':!![]});exports[a5_0x9c18('0x8')]=void 0x0;const axios_1=require(a5_0x9c18('0x18'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require(a5_0x9c18('0xc'));const {output}=require(a5_0x9c18('0x1c'));class DistributedAgentApi{constructor(_0x520b13,_0x65df10,_0x57c977){this['runGroup']=_0x65df10;this[a5_0x9c18('0x20')]=_0x57c977;this[a5_0x9c18('0x1d')]=(0x0,axios_1[a5_0x9c18('0x12')])(_0x520b13);}[a5_0x9c18('0x19')](_0x41bc91,_0x2c26c2,_0x457e0d){var _0x5436f0;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x117b30=(0x0,metric_logger_1[a5_0x9c18('0x7')])('dtePollTasks');try{const _0x14ac36=yield(0x0,axios_1[a5_0x9c18('0x1a')])(()=>this[a5_0x9c18('0x1d')][a5_0x9c18('0x1b')](a5_0x9c18('0x6'),{'runGroup':this[a5_0x9c18('0x1')],'agentName':this[a5_0x9c18('0x20')],'executionId':_0x41bc91,'statusCode':_0x2c26c2,'completedTasks':_0x457e0d}));_0x117b30[a5_0x9c18('0xd')]((0x0,metric_logger_1[a5_0x9c18('0x21')])(_0x14ac36));return _0x14ac36[a5_0x9c18('0x2')];}catch(_0x2564e4){_0x117b30['recordMetric'](((_0x5436f0=_0x2564e4===null||_0x2564e4===void 0x0?void 0x0:_0x2564e4[a5_0x9c18('0x13')])===null||_0x5436f0===void 0x0?void 0x0:_0x5436f0['response'])?(0x0,metric_logger_1[a5_0x9c18('0x21')])(_0x2564e4[a5_0x9c18('0x13')][a5_0x9c18('0x3')]):metric_logger_1[a5_0x9c18('0x1e')]);throw _0x2564e4;}});}[a5_0x9c18('0x1f')](_0x2afb5b){var _0x3b7eff;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x9c18('0x4')]){output[a5_0x9c18('0x11')]({'title':'Completing\x20run\x20group\x20with\x20an\x20error','bodyLines':['runGroup:\x20'+this[a5_0x9c18('0x1')],a5_0x9c18('0x14')+_0x2afb5b]});}const _0x4948a0=(0x0,metric_logger_1[a5_0x9c18('0x7')])(a5_0x9c18('0xe'));try{const _0x112932=yield(0x0,axios_1[a5_0x9c18('0x1a')])(()=>this[a5_0x9c18('0x1d')][a5_0x9c18('0x1b')](a5_0x9c18('0xb'),{'runGroup':this['runGroup'],'agentName':this[a5_0x9c18('0x20')],'criticalErrorMessage':_0x2afb5b}));if(environment_1[a5_0x9c18('0x4')]){output[a5_0x9c18('0x11')]({'title':'Completed\x20run\x20group\x20with\x20an\x20error'});}_0x4948a0[a5_0x9c18('0xd')]((0x0,metric_logger_1[a5_0x9c18('0x21')])(_0x112932));}catch(_0x2b9ee9){_0x4948a0[a5_0x9c18('0xd')](((_0x3b7eff=_0x2b9ee9===null||_0x2b9ee9===void 0x0?void 0x0:_0x2b9ee9[a5_0x9c18('0x13')])===null||_0x3b7eff===void 0x0?void 0x0:_0x3b7eff[a5_0x9c18('0x3')])?(0x0,metric_logger_1[a5_0x9c18('0x21')])(_0x2b9ee9['axiosException']['response']):metric_logger_1[a5_0x9c18('0x1e')]);console[a5_0x9c18('0x16')](_0x2b9ee9);}});}}exports['DistributedAgentApi']=DistributedAgentApi;