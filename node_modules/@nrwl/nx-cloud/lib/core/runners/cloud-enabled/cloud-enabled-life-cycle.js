const a0_0x5451=['cache-miss','params','startsWith','indexOf','cacheStatus','find','target','task','remote-cache-hit','skipNxCache','status','MAX_CHARACTERS_FAILED_TASK','join','../../../utilities/nx-imports','terminalOutputs','scheduleTask','outputObfuscator','path','statuses','NX_CLOUD_UNLIMITED_OUTPUT','length','terminalOutput','obfuscate','collectTerminalOutput','push','__esModule','code','local-cache-hit','cache','runtime','getTerminalOutput','project','cacheDirectory','toString','remote-cache','updateStartedTask','slice','hashDetails','endTime','toISOString','startTask','hash','runContext','MAX_CHARACTERS_SUCCESSFUL_TASK','npm:','TRUNCATED\x0a\x0a','MAX_CHARACTERS_CACHED_TASK','../../../utilities/serializer-overrides','cleanUpHashDetails','cacheableOperations','node_modules','.cache','endTask','defineProperty','nodes','tasks','CloudEnabledLifeCycle','readFileSync'];(function(_0x1a5b28,_0x54510f){const _0x73bdc5=function(_0xea9194){while(--_0xea9194){_0x1a5b28['push'](_0x1a5b28['shift']());}};_0x73bdc5(++_0x54510f);}(a0_0x5451,0xd2));const a0_0x73bd=function(_0x1a5b28,_0x54510f){_0x1a5b28=_0x1a5b28-0x0;let _0x73bdc5=a0_0x5451[_0x1a5b28];return _0x73bdc5;};'use strict';Object[a0_0x73bd('0x11')](exports,a0_0x73bd('0x2f'),{'value':!![]});exports[a0_0x73bd('0x14')]=void 0x0;const path=require(a0_0x73bd('0x27'));const path_1=require('path');const fs_1=require('fs');const environment_1=require('../../../utilities/environment');const serializer_overrides_1=require(a0_0x73bd('0xb'));const {workspaceRoot}=require(a0_0x73bd('0x23'));class CloudEnabledLifeCycle{constructor(_0x3f2baf,_0x4b7acd,_0x30224e,_0x3919e1,_0x1908b4,_0x4f066c,_0x198000){this[a0_0x73bd('0x6')]=_0x3f2baf;this[a0_0x73bd('0x36')]=_0x4b7acd;this[a0_0x73bd('0x1f')]=_0x30224e;this[a0_0x73bd('0x2d')]=_0x3919e1;this[a0_0x73bd('0xd')]=_0x1908b4;this['outputObfuscator']=_0x4f066c;this[a0_0x73bd('0x13')]=_0x198000;}[a0_0x73bd('0x25')](_0x33347a){this[a0_0x73bd('0x6')]['scheduledTasks']['push'](_0x33347a);}[a0_0x73bd('0x4')](_0x26d352){this[a0_0x73bd('0x13')][a0_0x73bd('0x2e')]({'taskId':_0x26d352['id'],'startTime':new Date()[a0_0x73bd('0x3')](),'target':_0x26d352[a0_0x73bd('0x1c')][a0_0x73bd('0x1c')],'projectName':_0x26d352[a0_0x73bd('0x1c')][a0_0x73bd('0x35')],'hash':_0x26d352[a0_0x73bd('0x5')],'hashDetails':this[a0_0x73bd('0xc')](_0x26d352[a0_0x73bd('0x1')]),'params':(0x0,serializer_overrides_1['serializeOverrides'])(_0x26d352)});}[a0_0x73bd('0x10')](_0x36c25c,_0x132162){let _0x221964;if(this[a0_0x73bd('0x6')][a0_0x73bd('0x28')][_0x36c25c[a0_0x73bd('0x5')]]){_0x221964=this[a0_0x73bd('0x6')][a0_0x73bd('0x28')][_0x36c25c[a0_0x73bd('0x5')]];}else{if(this['cacheableOperations']['indexOf'](_0x36c25c[a0_0x73bd('0x1c')]['target'])>-0x1&&!this[a0_0x73bd('0x1f')]){_0x221964=a0_0x73bd('0x31');}else{_0x221964=a0_0x73bd('0x16');}}this['updateStartedTask'](_0x36c25c,_0x132162,_0x221964);}['endTasks'](_0x389f3d){for(let _0x34becd of _0x389f3d){let _0x542bbe;const _0xad8f23=_0x34becd[a0_0x73bd('0x20')]===a0_0x73bd('0x38');const _0x64c5d9=_0x34becd[a0_0x73bd('0x20')]===a0_0x73bd('0x32');const _0x38ef77=_0x34becd[a0_0x73bd('0x20')]==='local-cache'||_0x34becd['status']==='local-cache-kept-existing'||_0x64c5d9;if(this[a0_0x73bd('0x6')][a0_0x73bd('0x28')][_0x34becd[a0_0x73bd('0x1d')][a0_0x73bd('0x5')]]){_0x542bbe=this[a0_0x73bd('0x6')][a0_0x73bd('0x28')][_0x34becd[a0_0x73bd('0x1d')][a0_0x73bd('0x5')]];}else if(_0xad8f23){_0x542bbe=a0_0x73bd('0x1e');}else if(_0x38ef77){_0x542bbe=a0_0x73bd('0x31');}else{if(this[a0_0x73bd('0xd')][a0_0x73bd('0x19')](_0x34becd['task']['target'][a0_0x73bd('0x1c')])>-0x1&&!this['skipNxCache']){_0x542bbe=a0_0x73bd('0x31');}else{_0x542bbe=a0_0x73bd('0x16');}}this[a0_0x73bd('0x39')](_0x34becd[a0_0x73bd('0x1d')],_0x34becd[a0_0x73bd('0x30')],_0x542bbe);}}['endCommand'](){}['updateStartedTask'](_0x26a26a,_0x3bcc3f,_0x5b1dae){const _0x6884ca=this['tasks'][a0_0x73bd('0x1b')](_0x455783=>_0x455783['taskId']===_0x26a26a['id']);if(!_0x6884ca){throw new Error('Cannot\x20find\x20task\x20'+_0x26a26a['id']);}_0x6884ca[a0_0x73bd('0x2')]=new Date()['toISOString']();_0x6884ca[a0_0x73bd('0x20')]=_0x3bcc3f;_0x6884ca[a0_0x73bd('0x17')]=this['outputObfuscator'][a0_0x73bd('0x2c')](_0x6884ca['params']);_0x6884ca[a0_0x73bd('0x1a')]=_0x5b1dae;if(this['collectTerminalOutput']){_0x6884ca[a0_0x73bd('0x2b')]=this[a0_0x73bd('0x34')](_0x26a26a['hash'],_0x6884ca[a0_0x73bd('0x1a')],_0x3bcc3f);}}[a0_0x73bd('0x34')](_0x5d562f,_0x5204fd,_0x3ae114){let _0x3d592f;if(this[a0_0x73bd('0x36')]){if(this[a0_0x73bd('0x36')][a0_0x73bd('0x18')]('./')){_0x3d592f=(0x0,path_1[a0_0x73bd('0x22')])(workspaceRoot,this[a0_0x73bd('0x36')]);}else{_0x3d592f=this[a0_0x73bd('0x36')];}}else{_0x3d592f=(0x0,path_1[a0_0x73bd('0x22')])(workspaceRoot,a0_0x73bd('0xe'),a0_0x73bd('0xf'),'nx');}try{const _0x2d4514=this['readTerminalOutputFile'](_0x3d592f,_0x5d562f);const _0x3cd0e8=this[a0_0x73bd('0x26')][a0_0x73bd('0x2c')](_0x2d4514);if(environment_1[a0_0x73bd('0x29')])return _0x3cd0e8;const _0x443051=_0x5204fd==='cache-miss'?_0x3ae114===0x0?CloudEnabledLifeCycle[a0_0x73bd('0x7')]:CloudEnabledLifeCycle['MAX_CHARACTERS_FAILED_TASK']:CloudEnabledLifeCycle[a0_0x73bd('0xa')];return _0x3cd0e8[a0_0x73bd('0x2a')]>_0x443051?a0_0x73bd('0x9')+_0x3cd0e8[a0_0x73bd('0x0')](_0x3cd0e8[a0_0x73bd('0x2a')]-_0x443051):_0x3cd0e8;}catch(_0x3e2cc4){return'';}}[a0_0x73bd('0xc')](_0x17d97e){const _0x19ae6e={};Object['keys'](_0x17d97e['nodes'])['filter'](_0x520c57=>!_0x520c57[a0_0x73bd('0x18')](a0_0x73bd('0x8')))['forEach'](_0x41b51f=>{_0x19ae6e[_0x41b51f]=_0x17d97e[a0_0x73bd('0x12')][_0x41b51f];});return{'nodes':_0x19ae6e,'runtime':_0x17d97e[a0_0x73bd('0x33')],'implicitDeps':_0x17d97e['implicitDeps']};}['readTerminalOutputFile'](_0x5a3f69,_0x1dbd84){try{return(0x0,fs_1[a0_0x73bd('0x15')])(path[a0_0x73bd('0x22')](_0x5a3f69,a0_0x73bd('0x24'),_0x1dbd84))[a0_0x73bd('0x37')]();}catch(_0x578f8b){try{return(0x0,fs_1['readFileSync'])(path[a0_0x73bd('0x22')](_0x5a3f69,_0x1dbd84,'terminalOutput'))[a0_0x73bd('0x37')]();}catch(_0x1d33ad){return'';}}}}exports[a0_0x73bd('0x14')]=CloudEnabledLifeCycle;CloudEnabledLifeCycle[a0_0x73bd('0x21')]=0x30d40;CloudEnabledLifeCycle[a0_0x73bd('0x7')]=0x4e20;CloudEnabledLifeCycle[a0_0x73bd('0xa')]=0x4e20;