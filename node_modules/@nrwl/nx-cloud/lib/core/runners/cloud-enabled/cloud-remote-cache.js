const a2_0x2ded=['value','extractErrorMessage','storage','cache-miss','retrieve','__esModule','resolve','messages','then','apply','api','Nx\x20Cloud:\x20Skipping\x20storing\x20','store','startRun','requests','scheduledTasks','cacheError','fileStorage','CloudRemoteCache','statuses','indexOf','get','__awaiter','.\x20Read\x20only\x20token\x20is\x20used.','status','done','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','hashUrls','response','Nx\x20Cloud:\x20Cache\x20miss\x20','forEach','push','runContext','put','reduce','VERBOSE_LOGGING','storeRequests','note','.\x20Status\x20404.','waitForStoreRequestsToComplete','hash','all','throw','../../../utilities/nx-imports','next'];(function(_0xc01854,_0x2ded75){const _0x19da88=function(_0x434d2e){while(--_0x434d2e){_0xc01854['push'](_0xc01854['shift']());}};_0x19da88(++_0x2ded75);}(a2_0x2ded,0x96));const a2_0x19da=function(_0xc01854,_0x2ded75){_0xc01854=_0xc01854-0x0;let _0x19da88=a2_0x2ded[_0xc01854];return _0x19da88;};'use strict';var __awaiter=this&&this[a2_0x19da('0x7')]||function(_0x53158b,_0x2cf92c,_0x271c84,_0x21c7c5){function _0x142b9e(_0x5c04e7){return _0x5c04e7 instanceof _0x271c84?_0x5c04e7:new _0x271c84(function(_0x5464a4){_0x5464a4(_0x5c04e7);});}return new(_0x271c84||(_0x271c84=Promise))(function(_0x5eb689,_0x1f5eef){function _0x19e8db(_0x3368e9){try{_0x15e176(_0x21c7c5['next'](_0x3368e9));}catch(_0x1570bd){_0x1f5eef(_0x1570bd);}}function _0x223b39(_0x24b6f7){try{_0x15e176(_0x21c7c5[a2_0x19da('0x1b')](_0x24b6f7));}catch(_0x270f15){_0x1f5eef(_0x270f15);}}function _0x15e176(_0x2425f6){_0x2425f6[a2_0x19da('0xa')]?_0x5eb689(_0x2425f6['value']):_0x142b9e(_0x2425f6[a2_0x19da('0x1e')])[a2_0x19da('0x26')](_0x19e8db,_0x223b39);}_0x15e176((_0x21c7c5=_0x21c7c5[a2_0x19da('0x27')](_0x53158b,_0x2cf92c||[]))[a2_0x19da('0x1d')]());});};Object['defineProperty'](exports,a2_0x19da('0x23'),{'value':!![]});exports[a2_0x19da('0x3')]=void 0x0;const environment_1=require('../../../utilities/environment');const {output}=require(a2_0x19da('0x1c'));class CloudRemoteCache{constructor(_0x3ba44c,_0x5de079,_0x514401,_0x6fa4e7){this[a2_0x19da('0x25')]=_0x3ba44c;this[a2_0x19da('0x28')]=_0x5de079;this['runContext']=_0x514401;this[a2_0x19da('0x2')]=_0x6fa4e7;this[a2_0x19da('0x15')]=[];}[a2_0x19da('0x22')](_0xa4c55a,_0x39384e){var _0xe155cf;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x19da('0x25')]['cacheError'])return![];const _0x4b80d5=yield this['hashUrls'](_0xa4c55a);if(!_0x4b80d5||!_0x4b80d5[a2_0x19da('0x6')]){if(environment_1[a2_0x19da('0x14')]){output[a2_0x19da('0x16')]({'title':a2_0x19da('0xe')+_0xa4c55a+'.'});}this[a2_0x19da('0x11')][a2_0x19da('0x4')][_0xa4c55a]=a2_0x19da('0x21');return![];}try{yield this[a2_0x19da('0x2')]['retrieve'](_0xa4c55a,_0x4b80d5[a2_0x19da('0x6')],_0x39384e);this[a2_0x19da('0x11')][a2_0x19da('0x4')][_0xa4c55a]='remote-cache-hit';return!![];}catch(_0x88027b){const _0x353fa0=(_0xe155cf=_0x88027b['axiosException'])!==null&&_0xe155cf!==void 0x0?_0xe155cf:_0x88027b;if(_0x353fa0[a2_0x19da('0xd')]&&_0x353fa0[a2_0x19da('0xd')][a2_0x19da('0x9')]===0x194){if(environment_1[a2_0x19da('0x14')]){output['note']({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0xa4c55a+a2_0x19da('0x17')});}}else{this[a2_0x19da('0x25')][a2_0x19da('0x1')]=this[a2_0x19da('0x25')][a2_0x19da('0x1f')](_0x353fa0,a2_0x19da('0x20'));}this[a2_0x19da('0x11')]['statuses'][_0xa4c55a]=a2_0x19da('0x21');return![];}});}[a2_0x19da('0x2a')](_0x288240,_0x76e0f6){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x19da('0x25')][a2_0x19da('0x1')])return![];const _0x32c21d=Promise[a2_0x19da('0x24')]()[a2_0x19da('0x26')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x47d403;const _0x47045b=yield this[a2_0x19da('0xc')](_0x288240);if(!_0x47045b)return![];if(!_0x47045b[a2_0x19da('0x12')]){if(environment_1[a2_0x19da('0x14')]){output[a2_0x19da('0x16')]({'title':a2_0x19da('0x29')+_0x288240+a2_0x19da('0x8')});}return!![];}try{yield this[a2_0x19da('0x2')][a2_0x19da('0x2a')](_0x288240,_0x47045b[a2_0x19da('0x12')],_0x76e0f6);return!![];}catch(_0x12cd5d){const _0x129520=(_0x47d403=_0x12cd5d['axiosException'])!==null&&_0x47d403!==void 0x0?_0x47d403:_0x12cd5d;this[a2_0x19da('0x25')][a2_0x19da('0x1')]=this[a2_0x19da('0x25')]['extractErrorMessage'](_0x129520,a2_0x19da('0x20'));return![];}}));this[a2_0x19da('0x15')][a2_0x19da('0x10')](_0x32c21d);return _0x32c21d;});}[a2_0x19da('0xc')](_0x2ddb45){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x2ddb45 in this[a2_0x19da('0x11')]['requests']){return(yield this[a2_0x19da('0x11')][a2_0x19da('0x2c')][_0x2ddb45])[_0x2ddb45];}else{const _0x403234=this[a2_0x19da('0x11')][a2_0x19da('0x0')]['filter'](_0x25a46e=>!this[a2_0x19da('0x11')][a2_0x19da('0x2c')][_0x25a46e[a2_0x19da('0x19')]])['map'](_0x15f72b=>_0x15f72b[a2_0x19da('0x19')]);if(_0x403234[a2_0x19da('0x5')](_0x2ddb45)===-0x1){_0x403234[a2_0x19da('0x10')](_0x2ddb45);}const _0xa7b7e=this['api'][a2_0x19da('0x2b')](environment_1[a2_0x19da('0xb')],_0x403234);_0x403234[a2_0x19da('0xf')](_0x34b3c9=>{this['runContext'][a2_0x19da('0x2c')][_0x34b3c9]=_0xa7b7e;});return(yield _0xa7b7e)[_0x2ddb45];}});}[a2_0x19da('0x18')](){return Promise[a2_0x19da('0x1a')](this[a2_0x19da('0x15')])['then'](_0x35c638=>_0x35c638[a2_0x19da('0x13')]((_0x46e105,_0x5311c6)=>_0x46e105&&_0x5311c6,!![]));}}exports['CloudRemoteCache']=CloudRemoteCache;